# Архитектура тестового фреймворка

## Технологический стек
- **Фреймворк**: Playwright Test Runner
- **Язык**: TypeScript
- **Отчетность**: HTML Reporter + скриншоты/видео
- **CI/CD**: GitHub Actions

## Структура проекта

events-calendar-tests/
├── .github/
│   └── workflows/
│       └── ci.yml                  # GitHub Actions workflow для CI/CD
├── config/
│   ├── playwright.config.ts        # Основная конфигурация Playwright
│   ├── test-data.ts                # Тестовые данные и константы
│   └── devices.ts                  # Конфигурации устройств для адаптивного тестирования
├── reports/
│   ├── html/                       # HTML отчеты тестов
│   ├── screenshots/                # Скриншоты при падении тестов
│   ├── videos/                     # Видео записи тестов
│   ├── traces/                     # Трейсы для отладки
│   └── logs/                       # Логи выполнения тестов
├── scripts/
│   ├── generate-report.js          # Скрипт генерации сводного отчета
│   ├── run-tests.sh                # Скрипт для локального запуска тестов
│   └── setup-env.js                # Скрипт настройки окружения
├── src/
│   ├── pages/
│   │   ├── BasePage.ts             # Базовый класс для всех страниц
│   │   └── EventsWidgetPage.ts     # Page Object для страницы календаря
│   ├── utils/
│   │   ├── helpers.ts              # Вспомогательные функции
│   │   ├── selectors.ts            # Централизованные селекторы элементов
│   │   ├── logger.ts               # Кастомный логгер
│   │   └── errorHandler.ts         # Обработчик ошибок
│   └── fixtures/
│       └── eventsWidgetFixture.ts  # Кастомные фикстуры для тестов
├── tests/
│   ├── smoke/
│   │   └── basic-rendering.spec.ts # Smoke-тесты базового отображения
│   ├── functional/
│   │   ├── navigation.spec.ts      # Тесты навигации по календарю
│   │   ├── widget.spec.ts          # Тесты функционала виджета
│   │   └── clipboard.spec.ts       # Тесты копирования кода в буфер
│   ├── visual/
│   │   └── responsive.spec.ts      # Визуальные тесты адаптивности
│   └── accessibility/
│       └── a11y.spec.ts            # Тесты доступности
├── docs/
│   ├── TEST_PLAN.md                # Детальный план тестирования
│   ├── TEST_CASES.md               # Матрица тестовых сценариев
│   ├── ARCHITECTURE.md             # Детальное описание архитектуры
│   ├── SETUP_GUIDE.md              # Руководство по настройке
│   ├── PAGE_ANALYSIS.md            # Анализ тестируемой страницы
│   └── KNOWN_ISSUES.md             # Известные проблемы и ограничения
├── .eslintrc.js                    # Конфигурация ESLint
├── .prettierrc.js                  # Конфигурация Prettier
├── .gitignore                      # Игнорируемые файлы Git
├── package.json                    # Зависимости и скрипты проекта
├── package-lock.json               # Фиксация версий зависимостей
├── tsconfig.json                   # Конфигурация TypeScript
├── README.md                       # Основная документация проекта
└── CONTRIBUTING.md                 # Руководство по вкладу в проект



## Архитектурные решения и паттерны

### 1. Page Object Model (POM)

- **Преимущества**: Инкапсуляция локаторов, переиспользование кода, легкое обслуживание
- **Реализация**: Базовый класс `BasePage` для общих методов, конкретные страницы наследуются от него
- **Стратегия селекторов**: Использование `data-testid` атрибутов, семантических селекторов, fallback на текстовое содержимое

### 2. Фикстуры и изоляция тестов

- **Подход**: Каждый тест получает свежую страницу и подготовленное состояние
- **Изоляция**: Тесты не зависят друг от друга, можно запускать в любом порядке
- **Очистка**: Автоматическая очистка состояния после каждого теста

### 3. Стратегия ожиданий

- **Приоритет**: `waitForLoadState('networkidle')` для полной загрузки страницы
- **Вторичный**: `expect().toBeVisible()` для проверки видимости элементов
- **Избегание**: Статических `waitForTimeout()` (используется только для анимаций с фиксированным временем)

### 4. Обработка ошибок и отказоустойчивость

- **Retry логика**: Автоматические повторные попытки для нестабильных операций
- **Каптчинг ошибок**: Автоматический сбор скриншотов, HTML дампов и логов при падении
- **Fallback стратегии**: Альтернативные методы для критических операций (например, копирование в буфер)

### 5. Отчетность и визуализация

- **HTML отчеты**: Детальные отчеты с возможностью фильтрации по статусам
- **Артефакты**: Скриншоты, видео, трейсы для каждого упавшего теста
- **CI интеграция**: Автоматические комментарии в PR с результатами тестов



