# Тестовые сценарии: Виджет календаря мероприятий

## Обзор

Данный документ содержит полный перечень тестовых сценариев для страницы виджета календаря мероприятий.

### Легенда приоритетов
- **P0** — Критический (блокирующий релиз)
- **P1** — Высокий (важный функционал)
- **P2** — Средний (дополнительные проверки)

---

## 1. Smoke-тесты (P0)

Базовые проверки работоспособности страницы.

| ID | Название | Предусловия | Шаги | Ожидаемый результат |
|----|----------|-------------|------|---------------------|
| SMOKE-01 | Загрузка страницы | — | 1. Открыть URL страницы | HTTP статус 200, страница загружена |
| SMOKE-02 | Основной заголовок | Страница загружена | 1. Найти заголовок на странице | Виден текст "Нравится наш календарь мероприятий?" |
| SMOKE-03 | Описательный текст | Страница загружена | 1. Найти описание | Виден текст "Хочешь такой же?" |
| SMOKE-04 | Заголовок страницы (title) | — | 1. Проверить title страницы | Содержит слово "календарь" |
| SMOKE-05 | Футер страницы | Страница загружена | 1. Проскроллить до футера | Футер отображается |
| SMOKE-06 | Консольные ошибки | — | 1. Открыть страницу 2. Проверить консоль | Нет критических ошибок JavaScript |
| SMOKE-07 | Ссылка на календарь | Страница загружена | 1. Найти ссылку на календарь | Ссылка присутствует и видима |
| SMOKE-08 | URL после загрузки | — | 1. Открыть страницу 2. Проверить URL | URL содержит "eventswidget" |

---

## 2. Функциональные тесты (P0)

Проверка основного бизнес-функционала.

| ID | Название | Предусловия | Шаги | Ожидаемый результат |
|----|----------|-------------|------|---------------------|
| FUNC-01 | Элементы формирования виджета | Страница загружена | 1. Найти заголовок 2. Найти описание | Оба элемента видны |
| FUNC-02 | Наличие интерфейса генерации | Страница загружена | 1. Найти форму или интерактивные элементы | Найдены элементы: form/select/button |
| FUNC-03 | Поле с кодом вставки | Страница загружена | 1. Найти поле с кодом | Поле найдено (textarea/input/code) |
| FUNC-04 | Валидность кода вставки | Код сгенерирован | 1. Получить код 2. Проверить формат | Код содержит HTML-теги (iframe/script/div) |
| FUNC-05 | Выбор дизайна | Страница загружена | 1. Найти селектор дизайна 2. Выбрать опцию | Дизайн выбран без ошибок |
| FUNC-06 | Кнопка копирования | Страница загружена | 1. Найти кнопку копирования | Кнопка видима и доступна |
| FUNC-07 | Клик по кнопке копирования | Кнопка найдена | 1. Кликнуть кнопку 2. Проверить консоль | Нет ошибок JavaScript |
| FUNC-08 | Clipboard API | Страница загружена | 1. Проверить доступность API | navigator.clipboard доступен |
| FUNC-09 | Fallback копирования | Clipboard API недоступен | 1. Проверить execCommand | document.execCommand доступен |

---

## 3. Визуальные/Адаптивные тесты (P1)

Проверка отображения на различных устройствах.

| ID | Название | Устройство/Viewport | Шаги | Ожидаемый результат |
|----|----------|---------------------|------|---------------------|
| VIS-01 | Мобильный — скролл | 375x812 (iPhone 12) | 1. Установить viewport 2. Загрузить страницу | Нет горизонтального скролла |
| VIS-02 | Мобильный — элементы | 375x812 | 1. Проверить видимость | Заголовок и футер видны |
| VIS-03 | Планшет — отображение | 768x1024 (iPad) | 1. Загрузить страницу 2. Проверить layout | Нет скролла, элементы видны |
| VIS-04 | Десктоп — полное отображение | 1920x1080 | 1. Загрузить страницу | Все элементы видны |
| VIS-05 | Десктоп малый | 1366x768 | 1. Загрузить страницу | Нет горизонтального скролла |
| VIS-06 | Скриншот сравнение | 1920x1080 | 1. Сделать скриншот | Скриншот соответствует baseline (±10%) |
| VIS-07 | iPhone 12 — полная проверка | Эмуляция устройства | 1. Эмулировать iPhone 12 | Адаптивность корректна |
| VIS-08 | iPad Pro — проверка | Эмуляция устройства | 1. Эмулировать iPad Pro | Отображение корректно |
| VIS-09 | Desktop Chrome | 1920x1080 + Chrome UA | 1. Открыть в Chrome | Все элементы видны |
| VIS-10 | Resize окна | Desktop → Mobile | 1. Изменить размер окна | Верстка не ломается |

---

## 4. Тесты доступности (P2)

Базовые проверки accessibility.

| ID | Название | Предусловия | Шаги | Ожидаемый результат |
|----|----------|-------------|------|---------------------|
| A11Y-01 | Атрибут lang | — | 1. Проверить html[lang] | Атрибут lang присутствует |
| A11Y-02 | Alt для изображений | — | 1. Найти img без alt | Все img имеют alt |
| A11Y-03 | Заголовок h1 | — | 1. Найти h1 элементы | Есть хотя бы один h1 |
| A11Y-04 | Текст ссылок | — | 1. Проверить ссылки | Ссылки имеют различимый текст |
| A11Y-05 | Labels для форм | — | 1. Найти inputs без labels | Inputs имеют связанные labels |
| A11Y-06 | Имена кнопок | — | 1. Найти кнопки без текста | Кнопки имеют aria-label/title |
| A11Y-07 | Контрастность текста | — | 1. Базовая проверка цветов | Текст не слишком светлый |
| A11Y-08 | Tab-навигация | — | 1. Нажать Tab | Фокус перемещается на интерактивный элемент |
| A11Y-09 | Landmarks | — | 1. Найти main/nav | Есть main или navigation landmark |
| A11Y-10 | Видимость фокуса | — | 1. Tab несколько раз | Фокус визуально виден |

---

## 5. Матрица покрытия

### По функциональности

| Функция | Smoke | Functional | Visual | A11Y |
|---------|-------|------------|--------|------|
| Загрузка страницы | ✅ | — | — | — |
| Заголовок | ✅ | ✅ | ✅ | ✅ |
| Описание | ✅ | ✅ | — | — |
| Генерация кода | — | ✅ | — | — |
| Копирование | — | ✅ | — | — |
| Адаптивность | — | — | ✅ | — |
| Навигация | — | — | — | ✅ |

### По браузерам

| Браузер | Smoke | Functional | Visual |
|---------|-------|------------|--------|
| Chromium | ✅ | ✅ | ✅ |
| Firefox | ✅ | ✅ | ✅ |
| WebKit | ✅ | ✅ | ✅ |

### По устройствам

| Устройство | Smoke | Visual |
|------------|-------|--------|
| Desktop 1920x1080 | ✅ | ✅ |
| Desktop 1366x768 | — | ✅ |
| Tablet 768x1024 | — | ✅ |
| Mobile 375x812 | — | ✅ |

---

## 6. Команды запуска

```bash
# Запуск всех тестов
npm test

# Запуск по категориям (через grep)
npm run test:smoke        # @smoke
npm run test:functional   # @functional
npm run test:visual       # @visual
npm run test:a11y         # @accessibility

# Запуск по приоритету
npx playwright test --grep @P0
npx playwright test --grep @P1
npx playwright test --grep @P2
```

---

*Всего тестов: 29*
- Smoke: 8
- Functional: 9
- Visual: 10
- Accessibility: 10 (+1 skipped для axe-core)

*Документ версии 1.0*
